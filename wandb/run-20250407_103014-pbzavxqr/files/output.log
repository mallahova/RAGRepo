Evaluating Recall@10:   0%|                                                                                 | 0/34 [00:30<?, ?it/s]
query: How does the SelectDisplay component handle the device options when retrieving display IDs?
Expanded query: How does the SelectDisplay component manage or process device options when retrieving or obtaining display IDs? What methods or functions does it use to handle device option selection, and what are the relevant classes such as DisplayManager, DisplayOption, or DeviceSelector involved in this process? Additionally, what are the different event handlers or callbacks, like onChange or onSelect, associated with the SelectDisplay component that facilitate handling the device options for display ID retrieval?
Traceback (most recent call last):
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/eval/evaluate_retrieval.py", line 40, in evaluate_recall_and_latency
    results = retrieval_chain.invoke(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/base.py", line 3047, in invoke
    input = context.run(step.invoke, input, config)
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/base.py", line 4780, in invoke
    return self._call_with_config(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/base.py", line 1933, in _call_with_config
    context.run(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/base.py", line 4633, in _invoke
    output = call_func_with_variable_args(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/retrieval/search_index.py", line 120, in retrieve_hybrid_top_k
    docs = hybrid_retriever.invoke(query)[:top_k_val]
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain/retrievers/ensemble.py", line 118, in invoke
    raise e
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain/retrievers/ensemble.py", line 115, in invoke
    result = self.rank_fusion(input, run_manager=run_manager, config=config)
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain/retrievers/ensemble.py", line 222, in rank_fusion
    retriever_docs = [
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain/retrievers/ensemble.py", line 223, in <listcomp>
    retriever.invoke(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/retrievers.py", line 259, in invoke
    result = self._get_relevant_documents(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/vectorstores/base.py", line 1077, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **_kwargs)
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_community/vectorstores/faiss.py", line 643, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_community/vectorstores/faiss.py", line 516, in similarity_search_with_score
    docs = self.similarity_search_with_score_by_vector(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_community/vectorstores/faiss.py", line 417, in similarity_search_with_score_by_vector
    scores, indices = self.index.search(vector, k if filter is None else fetch_k)
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/faiss/__init__.py", line 308, in replacement_search
    assert d == self.d
AssertionError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/eval/run_experiments.py", line 263, in <module>
    main()
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/eval/run_experiments.py", line 242, in main
    phase1_results = phase_1_coarse_search(
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/eval/run_experiments.py", line 89, in phase_1_coarse_search
    eval_results = evaluate_recall_and_latency(
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/eval/evaluate_retrieval.py", line 45, in evaluate_recall_and_latency
    time.sleep(60)
KeyboardInterrupt
Traceback (most recent call last):
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/eval/evaluate_retrieval.py", line 40, in evaluate_recall_and_latency
    results = retrieval_chain.invoke(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/base.py", line 3047, in invoke
    input = context.run(step.invoke, input, config)
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/base.py", line 4780, in invoke
    return self._call_with_config(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/base.py", line 1933, in _call_with_config
    context.run(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/base.py", line 4633, in _invoke
    output = call_func_with_variable_args(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/runnables/config.py", line 428, in call_func_with_variable_args
    return func(input, **kwargs)  # type: ignore[call-arg]
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/retrieval/search_index.py", line 120, in retrieve_hybrid_top_k
    docs = hybrid_retriever.invoke(query)[:top_k_val]
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain/retrievers/ensemble.py", line 118, in invoke
    raise e
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain/retrievers/ensemble.py", line 115, in invoke
    result = self.rank_fusion(input, run_manager=run_manager, config=config)
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain/retrievers/ensemble.py", line 222, in rank_fusion
    retriever_docs = [
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain/retrievers/ensemble.py", line 223, in <listcomp>
    retriever.invoke(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/retrievers.py", line 259, in invoke
    result = self._get_relevant_documents(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_core/vectorstores/base.py", line 1077, in _get_relevant_documents
    docs = self.vectorstore.similarity_search(query, **_kwargs)
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_community/vectorstores/faiss.py", line 643, in similarity_search
    docs_and_scores = self.similarity_search_with_score(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_community/vectorstores/faiss.py", line 516, in similarity_search_with_score
    docs = self.similarity_search_with_score_by_vector(
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/langchain_community/vectorstores/faiss.py", line 417, in similarity_search_with_score_by_vector
    scores, indices = self.index.search(vector, k if filter is None else fetch_k)
  File "/home/mallahova/miniconda3/envs/ragrepo/lib/python3.10/site-packages/faiss/__init__.py", line 308, in replacement_search
    assert d == self.d
AssertionError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/eval/run_experiments.py", line 263, in <module>
    main()
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/eval/run_experiments.py", line 242, in main
    phase1_results = phase_1_coarse_search(
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/eval/run_experiments.py", line 89, in phase_1_coarse_search
    eval_results = evaluate_recall_and_latency(
  File "/home/mallahova/code/basics/projects/interview/RAGRepo/src/eval/evaluate_retrieval.py", line 45, in evaluate_recall_and_latency
    time.sleep(60)
KeyboardInterrupt
